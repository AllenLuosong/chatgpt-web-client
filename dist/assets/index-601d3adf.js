import{c as q,a as D,d as P,u as H,b as W,s as J,e as Y,f as R,g as X,h as z,r as V,i as Z,j as Q,k as ee,l as se,m as te,o as U,n as B,p as a,q as F,t as e,v as g,w as s,x as o,_ as N,y,N as T,F as ae,z as le,A as j,B as b,C as oe,D as G,E as I,G as ne,H as O,I as ie,J as K,K as E,L as re,M as ue,O as ce,P as de,Q as fe,R as pe,S as A,T as ve,U as ge}from"./index-f7947f56.js";import{N as L,a as k}from"./Col-fa148259.js";const me=q("statistic",[D("label",`
 font-weight: var(--n-label-font-weight);
 transition: .3s color var(--n-bezier);
 font-size: var(--n-label-font-size);
 color: var(--n-label-text-color);
 `),q("statistic-value",`
 margin-top: 4px;
 font-weight: var(--n-value-font-weight);
 `,[D("prefix",`
 margin: 0 4px 0 0;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-prefix-text-color);
 `,[q("icon",{verticalAlign:"-0.125em"})]),D("content",`
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-text-color);
 `),D("suffix",`
 margin: 0 0 0 4px;
 font-size: var(--n-value-font-size);
 transition: .3s color var(--n-bezier);
 color: var(--n-value-suffix-text-color);
 `,[q("icon",{verticalAlign:"-0.125em"})])])]),_e=Object.assign(Object.assign({},W.props),{tabularNums:Boolean,label:String,value:[String,Number]}),S=P({name:"Statistic",props:_e,setup(d){const{mergedClsPrefixRef:l,inlineThemeDisabled:u,mergedRtlRef:c}=H(d),t=W("Statistic","-statistic",me,J,d,l),n=Y("Statistic",c,l),i=R(()=>{const{self:{labelFontWeight:_,valueFontSize:w,valueFontWeight:r,valuePrefixTextColor:p,labelTextColor:m,valueSuffixTextColor:C,valueTextColor:h,labelFontSize:M},common:{cubicBezierEaseInOut:x}}=t.value;return{"--n-bezier":x,"--n-label-font-size":M,"--n-label-font-weight":_,"--n-label-text-color":m,"--n-value-font-weight":r,"--n-value-font-size":w,"--n-value-prefix-text-color":p,"--n-value-suffix-text-color":C,"--n-value-text-color":h}}),f=u?X("statistic",void 0,i,d):void 0;return{rtlEnabled:n,mergedClsPrefix:l,cssVars:u?void 0:i,themeClass:f==null?void 0:f.themeClass,onRender:f==null?void 0:f.onRender}},render(){var d;const{mergedClsPrefix:l,$slots:{default:u,label:c,prefix:t,suffix:n}}=this;return(d=this.onRender)===null||d===void 0||d.call(this),z("div",{class:[`${l}-statistic`,this.themeClass,this.rtlEnabled&&`${l}-statistic--rtl`],style:this.cssVars},V(c,i=>z("div",{class:`${l}-statistic__label`},this.label||i)),z("div",{class:`${l}-statistic-value`,style:{fontVariantNumeric:this.tabularNums?"tabular-nums":""}},V(t,i=>i&&z("span",{class:`${l}-statistic-value__prefix`},i)),this.value!==void 0?z("span",{class:`${l}-statistic-value__content`},this.value):V(u,i=>i&&z("span",{class:`${l}-statistic-value__content`},i)),V(n,i=>i&&z("span",{class:`${l}-statistic-value__suffix`},i))))}});function he(){const d=new Date,l=d.getDate(),u=d.getMonth()+1;return`${d.getFullYear()}-${u}-${l}`}const xe={class:"p-4 space-y-5 min-h-[200px]"},ye={class:"space-y-6"},be={class:"flex-shrink-0 w-[100px]"},we={class:"flex flex-wrap items-center gap-4"},Ce={class:"flex items-center space-x-4"},$e={class:"flex-shrink-0 w-[100px]"},ke={class:"flex flex-wrap items-center gap-4"},Se={class:"flex items-center space-x-4"},ze={class:"flex-shrink-0 w-[100px]"},Ne={class:"flex flex-wrap items-center gap-4"},Re={class:"flex-shrink-0 w-[100px]"},Ue={class:"flex flex-wrap items-center gap-4"},Me=P({__name:"General",setup(d){const l=Z(),u=Q(),c=ee(),t=se(),{isMobile:n}=te(),i=R(()=>u.theme),f=R({get(){return u.language},set(m){u.setLanguage(m)}}),_=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],w=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"}];function r(){const m=he(),C=localStorage.getItem("chatStorage")||"{}",h=JSON.stringify(JSON.parse(C),null,2),M=new Blob([h],{type:"application/json"}),x=URL.createObjectURL(M),v=document.createElement("a");v.href=x,v.download=`chat-store_${m}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v)}function p(){c.removeToken(),t.resetUserInfo(),l.push({name:"Root"})}return(m,C)=>(U(),B("div",xe,[a("div",ye,[a("div",{class:F(["flex items-center space-x-4",e(n)&&"items-start"])},[a("span",be,g(m.$t("setting.chatHistory")),1),a("div",we,[s(e(T),{size:"small",onClick:r},{icon:o(()=>[s(e(N),{icon:"ri:download-2-fill"})]),default:o(()=>[y(" "+g(m.$t("common.export")),1)]),_:1})])],2),a("div",Ce,[a("span",$e,g(m.$t("setting.theme")),1),a("div",ke,[(U(),B(ae,null,le(_,h=>s(e(T),{key:h.key,size:"small",type:h.key===e(i)?"primary":void 0,onClick:M=>e(u).setTheme(h.key)},{icon:o(()=>[s(e(N),{icon:h.icon},null,8,["icon"])]),_:2},1032,["type","onClick"])),64))])]),a("div",Se,[a("span",ze,g(m.$t("setting.language")),1),a("div",Ne,[s(e(j),{style:{width:"140px"},value:e(f),options:w,onUpdateValue:C[0]||(C[0]=h=>e(u).setLanguage(h))},null,8,["value"])])]),a("div",{class:F(["flex items-center space-x-4",e(n)&&"items-start"])},[a("span",Re,g(m.$t("setting.operate")),1),a("div",Ue,[s(e(T),{size:"small",onClick:p},{icon:o(()=>[s(e(N),{icon:"ion:arrow-undo"})]),default:o(()=>[y(" "+g(m.$t("setting.logout")),1)]),_:1})])],2)])]))}}),Te={class:"p-4 space-y-5 min-h-[200px]"},Pe={class:"space-y-6"},Be={class:"flex items-center space-x-4"},qe=a("span",{class:"flex-shrink-0 w-[100px]"},"我的secret key",-1),De={class:"flex-1"},Ve={class:"flex items-center space-x-4"},Ae=a("span",{class:"flex-shrink-0 w-[100px]"},"我的自定义地址",-1),Ie={class:"flex-1"},Oe={class:"flex items-center space-x-4"},Ee=a("span",{class:"flex-shrink-0 w-[100px]"},"聊天模型",-1),Le={class:"flex-1"},je={class:"flex items-center space-x-4"},Fe=a("span",{class:"flex-shrink-0 w-[100px]"},"绘画模型",-1),We={class:"flex-1"},Qe={class:"flex items-center space-x-4"},Ge=a("span",{class:"flex-shrink-0 w-[100px]"}," ",-1),Ke=P({__name:"Advanced",props:{userConfig:null},emits:["reloadConfig"],setup(d,{emit:l}){const u=d,c=b(!1),t=Q(),n=oe(),i=G(),f=b(u.userConfig.secretKey??""),_=b(u.userConfig.proxyAdress??"");function w(){l("reloadConfig")}const r=R({get(){return t.chatModel},set(x){t.setChatModel(x)}}),p=R({get(){return t.drawvalue},set(x){t.setDrawValue(x)}});async function m(){const x=await ne();try{c.value=!0;const v=await O.configEdit({secretKey:f.value,proxyAdress:_.value,chatModel:t.chatModel,drawvalue:t.drawvalue,baseUserId:x.data.baseUserId});i.success("更新成功"),w()}catch(v){i.error(v.message??"error")}finally{c.value=!1}}function C(){n.resetSetting(),i.success(ie("common.success")),window.location.reload()}const h=[{label:"gpt-3.5-turbo",key:"gpt-3.5-turbo",value:"gpt-3.5-turbo"},{label:"gpt-4-turbo-preview",key:"gpt-4-turbo-preview",value:"gpt-4-turbo-preview"},{label:"gpt-4",key:"gpt-4",value:"gpt-4"}],M=[{label:"dall-e-3",key:"dall-e-3",value:"dall-e-3"},{label:"dall-e-2",key:"dall-e-2",value:"dall-e-2"}];return(x,v)=>(U(),B("div",Te,[a("div",Pe,[a("div",Be,[qe,a("div",De,[s(e(I),{value:f.value,"onUpdate:value":v[0]||(v[0]=$=>f.value=$),placeholder:"如不指定则使用默认配置",type:"textarea",autosize:{minRows:1,maxRows:4}},null,8,["value"])])]),a("div",Ve,[Ae,a("div",Ie,[s(e(I),{value:_.value,"onUpdate:value":v[1]||(v[1]=$=>_.value=$),placeholder:"如不指定,默认调用官方地址https://api.openai.com/v1",type:"textarea",autosize:{minRows:1,maxRows:4}},null,8,["value"])])]),a("div",Oe,[Ee,a("div",Le,[s(e(j),{value:e(r),placeholder:"请选择聊天模型",options:h,onUpdateValue:v[2]||(v[2]=$=>e(t).setChatModel($))},null,8,["value"])])]),a("div",je,[Fe,a("div",We,[s(e(j),{value:e(p),placeholder:"请选择绘画模型",options:M,onUpdateValue:v[3]||(v[3]=$=>e(t).setDrawValue($))},null,8,["value"])])]),a("div",Qe,[Ge,s(e(T),{size:"small",onClick:C},{default:o(()=>[y(g(x.$t("common.reset")),1)]),_:1}),s(e(T),{size:"small",type:"primary",onClick:v[4]||(v[4]=$=>m())},{default:o(()=>[y(g(x.$t("common.save")),1)]),_:1})])])]))}}),He=P({__name:"Quota",props:{userUsage:null},setup(d){const l=d;return console.log(l),(u,c)=>(U(),K(e(re),{vertical:""},{default:o(()=>[s(e(E),{title:"余额"},{default:o(()=>[s(e(L),null,{default:o(()=>[s(e(k),{span:5},{default:o(()=>{var t;return[s(e(S),{label:"本月消费金额(元)",value:((t=l.userUsage)==null?void 0:t.total_used)??"-"},null,8,["value"])]}),_:1}),s(e(k),{span:5},{default:o(()=>{var t;return[s(e(S),{label:"剩余余额(元)",value:((t=l.userUsage)==null?void 0:t.total_available)??"-"},null,8,["value"])]}),_:1})]),_:1})]),_:1}),s(e(E),{title:"文本聊天"},{default:o(()=>[s(e(L),null,{default:o(()=>[s(e(k),{span:5},{default:o(()=>{var t;return[s(e(S),{label:"今日请求数",value:((t=l.userConfig)==null?void 0:t.todayRequestTimes)??"-"},{suffix:o(()=>{var n;return[y(" / "+g(((n=l.userConfig)==null?void 0:n.quotaByRequestDaily)??"-"),1)]}),_:1},8,["value"])]}),_:1}),s(e(k),{span:5},{default:o(()=>{var t;return[s(e(S),{label:"今日消耗token数",value:((t=l.userConfig)==null?void 0:t.todayTokenCost)??"-"},{suffix:o(()=>{var n;return[y(" / "+g(((n=l.userConfig)==null?void 0:n.quotaByTokenDaily)??"-"),1)]}),_:1},8,["value"])]}),_:1}),s(e(k),{span:5},{default:o(()=>{var t;return[s(e(S),{label:"当月请求数",value:((t=l.userConfig)==null?void 0:t.currMonthRequestTimes)??"-"},{suffix:o(()=>{var n;return[y(" / "+g(((n=l.userConfig)==null?void 0:n.quotaByRequestMonthly)??"-"),1)]}),_:1},8,["value"])]}),_:1}),s(e(k),{span:5},{default:o(()=>{var t;return[s(e(S),{label:"当月消耗token数",value:((t=l.userConfig)==null?void 0:t.currMonthTokenCost)??"-"},{suffix:o(()=>{var n;return[y(" / "+g(((n=l.userConfig)==null?void 0:n.quotaByTokenMonthly)??"-"),1)]}),_:1},8,["value"])]}),_:1})]),_:1})]),_:1}),s(e(E),{title:"图片生成"},{default:o(()=>[s(e(L),null,{default:o(()=>[s(e(k),{span:5},{default:o(()=>{var t;return[s(e(S),{label:"今日生成图片",value:((t=l.userConfig)==null?void 0:t.todayGeneratedImageNumber)??"-"},{suffix:o(()=>{var n;return[y(" / "+g(((n=l.userConfig)==null?void 0:n.quotaByImageDaily)??"-"),1)]}),_:1},8,["value"])]}),_:1}),s(e(k),{span:5},{default:o(()=>{var t;return[s(e(S),{label:"当月生成图片",value:((t=l.userConfig)==null?void 0:t.currMonthGeneratedImageNumber)??"-"},{suffix:o(()=>{var n;return[y(" / "+g(((n=l.userConfig)==null?void 0:n.quotaByImageMonthly)??"-"),1)]}),_:1},8,["value"])]}),_:1})]),_:1})]),_:1})]),_:1}))}}),Je={class:"p-4 space-y-5 min-h-[200px]"},Ye={class:"space-y-6"},Xe={class:"flex items-center space-x-4"},Ze=a("span",{class:"flex-shrink-0 w-[100px]"},"新的密码",-1),es={class:"flex items-center space-x-4"},ss=a("span",{class:"flex-shrink-0 w-[100px]"},"确认密码",-1),ts={key:0,class:"flex items-center space-x-4"},as={class:"flex items-center space-x-4"},ls=a("span",{class:"flex-shrink-0 w-[100px]"},null,-1),os=P({__name:"ModifyPassword",setup(d){const l=G(),u=b(""),c=b(""),t=b(!1),n=b(""),i=b(""),f=R(()=>{if(!(!n.value||!i.value))return n.value!==i.value?"error":"success"});async function _(){const w=n.value.trim(),r=i.value.trim();if(!n.value||!r||w!==r){l.error("两次输入的密码不一致 | Passwords don't match");return}try{t.value=!0;const p=await O.modifyPassword(n.value);c.value=p.data,u.value="success",l.success(c.value)}catch(p){l.error(p.message??"error"),c.value=p.message,u.value="fail"}finally{t.value=!1}}return(w,r)=>(U(),B("div",Je,[a("div",Ye,[a("div",Xe,[Ze,s(e(I),{value:n.value,"onUpdate:value":r[0]||(r[0]=p=>n.value=p),type:"password",placeholder:"新的密码","show-password-on":"click",status:e(f)},null,8,["value","status"])]),a("div",es,[ss,s(e(I),{value:i.value,"onUpdate:value":r[1]||(r[1]=p=>i.value=p),type:"password",placeholder:"确认密码","show-password-on":"click",status:e(f)},null,8,["value","status"])]),c.value?(U(),B("div",ts,[s(e(ue),{type:u.value?"success":"error"},{default:o(()=>[y(g(c.value),1)]),_:1},8,["type"])])):ce("",!0),a("div",as,[ls,s(e(T),{type:"primary",disabled:t.value||n.value!==i.value,loading:t.value,onClick:_},{default:o(()=>[y(" 确认重置 ")]),_:1},8,["disabled","loading"])])])]))}}),ns={class:"ml-2"},is={class:"ml-2"},rs={class:"ml-2"},us={class:"min-h-[100px]"},cs={class:"ml-2"},ps=P({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(d,{emit:l}){const u=d,c=b("Config"),t=b(!1),n=b({}),i=b({}),f=R({get(){return u.visible},set(r){l("update:visible",r)}});async function _(){try{t.value=!0;const{data:r}=await O.fetchUserUsage();i.value=r}finally{t.value=!1}}async function w(){try{t.value=!0;const{data:r}=await O.fetchUserConfig();n.value=r}finally{t.value=!1}}return de(c,r=>{r==="Quota"&&_()}),fe(()=>{w()}),(r,p)=>(U(),K(e(ge),{show:e(f),"onUpdate:show":p[1]||(p[1]=m=>ve(f)?f.value=m:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:o(()=>[a("div",null,[s(e(pe),{value:c.value,"onUpdate:value":p[0]||(p[0]=m=>c.value=m),type:"line",animated:""},{default:o(()=>[s(e(A),{name:"Config",tab:"Config"},{tab:o(()=>[s(e(N),{class:"text-lg",icon:"ri:list-settings-line"}),a("span",ns,g(r.$t("setting.config")),1)]),default:o(()=>[s(Me)]),_:1}),s(e(A),{name:"Quota",tab:"Quota"},{tab:o(()=>[s(e(N),{class:"text-lg",icon:"eos-icons:quota-outlined"}),a("span",is,g(r.$t("setting.quota")),1)]),default:o(()=>[s(He,{"user-usage":i.value,onReloadConfig:_},null,8,["user-usage"])]),_:1}),s(e(A),{name:"Advanced",tab:"Advanced"},{tab:o(()=>[s(e(N),{class:"text-lg",icon:"ri:equalizer-line"}),a("span",rs,g(r.$t("setting.advanced")),1)]),default:o(()=>[a("div",us,[s(Ke,{"user-config":n.value,onReloadConfig:w},null,8,["user-config"])])]),_:1}),s(e(A),{name:"ModifyPassword",tab:"ModifyPassword"},{tab:o(()=>[s(e(N),{class:"text-lg",icon:"carbon:password"}),a("span",cs,g(r.$t("common.restPassWord")),1)]),default:o(()=>[s(os)]),_:1})]),_:1},8,["value"])])]),_:1},8,["show"]))}});export{ps as default};
